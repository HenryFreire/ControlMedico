<% include componentes/header %>
<div class="main-content">
    <div class="main-content-inner">
        <div class="breadcrumbs ace-save-state" id="breadcrumbs">
            <ul class="breadcrumb">
                <li>
                    <i class="ace-icon fa fa-home home-icon"></i>
                    <a href="#">Inicio</a>
                </li>
                <li class="">Perfil</li>
            </ul>
        </div>
        <div class="page-header">
            <h1>
                Perfil
                <small>
                    <i class="ace-icon fa fa-angle-double-right"></i>
                    Opciones de Perfil
                </small>
            </h1>
        </div>
        <br>
        <div class="container-fluid">
            <div class="col-xs-12 col-sm-3 col-md-3 col-md-offset-1 col-sm-offset-1 center">
                <div>
				<span class="profile-picture">
					<img id="avatar" width="200px" height="80px" class="editable img-responsive" alt="Alex's Avatar" src=<%- '"../../images/' + usuario.id +'.jpg"'%> />
				</span>

                    <div class="space-4"></div>

                    <div class="width-80 label label-info label-xlg arrowed-in arrowed-in-right">
                        <div class="inline position-relative">
                            <a href="#" class="user-title-label dropdown-toggle" data-toggle="dropdown">
                                <i class="ace-icon fa fa-circle light-green"></i>
                                &nbsp;
                                <span class="white"><%- usuario.nombre %></span>
                            </a>
                        </div>
                    </div>
                </div>

                <div class="space-6"></div>

                <div class="profile-contact-info">
                    <div class="profile-contact-links align-left">
                        <a href="#" class="btn btn-link" data-toggle="modal" data-target="#myModal">
                            <i class="ace-icon fa fa-file-image-o  bigger-120 green"></i>
                            Editar foto de perfil
                        </a>

                        <a href="#" class="btn btn-link" data-toggle="modal" data-target="#informacion">
                            <i class="ace-icon fa fa-pencil-square  bigger-120 pink"></i>
                            Editar Datos
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-sm-6 col-xs-12">

                <div class="profile-user-info profile-user-info-striped">
                    <div class="profile-info-row">
                        <div class="profile-info-name"> Nombre </div>

                        <div class="profile-info-value">
                            <span class="editable" id="username"><%- usuario.nombre %></span>
                        </div>
                    </div>
                    <div class="profile-info-row">
                        <div class="profile-info-name"> Email </div>

                        <div class="profile-info-value">
                            <span class="editable" id="login"><%- usuario.email %></span>
                        </div>
                    </div>
                    <div class="profile-info-row">
                        <div class="profile-info-name"> Teléfono </div>

                        <div class="profile-info-value">
                            <span class="editable" id="age"><%- usuario.telefono %></span>
                        </div>

                    </div>
                    <div class="profile-info-row">
                        <div class="profile-info-name"> Ubicación </div>

                        <div class="profile-info-value">
                            <i class="fa fa-map-marker light-orange bigger-110"></i>
                            <%- usuario.direccion %>
                        </div>
                    </div>
                    <div class="profile-info-row">
                        <div class="profile-info-name"> Rol </div>

                        <div class="profile-info-value">
                            <span class="editable" id="age">Administrador</span>
                        </div>

                    </div>
                    <div class="profile-info-row">
                        <div class="profile-info-name"> Hora de Inicio </div>

                        <div class="profile-info-value">
                            <span class="editable" id="signup"><%- usuario.horaInicio %></span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div><!-- Apertura en el header -->


<!-- Modal editar foto -->
<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Subir foto de perfil</h4>
            </div>
            <form action="/profile/upload" method="POST" enctype='multipart/form-data'>
                <div class="modal-body">
                    <input type="file" name="avatar" required>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary btn-sm"><i class="fa fa-cloud-upload"></i> Subir</button>
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Cancelar</button>
                </div>
            </form>
        </div>

    </div>
</div>

<!-- Modal editar datos -->
<div id="informacion" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Actualizar Información</h4>
            </div>
            <form action="/profile/reload" method="POST" >
                <div class="modal-body">
                    <div class="">
                        <label for="nombre" class="control-label no-padding-right">Nombre</label>
                        <input type="text" class="form-control" name="nombre" value=<%- '"'+ usuario.nombre +'"' %> required/>
                        <label for="email" class="control-label no-padding-right">Email</label>
                        <input type="email" class="form-control" name="email" value=<%- '"'+ usuario.email +'"' %> required/>
                        <label for="telefono" class="control-label no-padding-right">Teléfono</label>
                        <input type="number" class="form-control" name="telefono" value=<%- '"'+ usuario.telefono +'"' %> required/>
                        <label for="direccion" class="control-label no-padding-right">Dirección</label>
                        <input type="text" class="form-control" name="direccion" value=<%- '"'+ usuario.direccion +'"' %>  required/>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary btn-sm"><i class="fa fa-pencil"></i> Editar</button>
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Cancelar</button>
                </div>
            </form>
        </div>

    </div>
</div>

<% include componentes/footer %>
<script>
    var msg = <%- JSON.stringify(msg) %>
    if (<%- error %>){
        error( 'fa fa-times-circle', msg);
    }
    if (<%- listo %>){
        success( 'fa fa-check-circle', msg );
    }
</script>